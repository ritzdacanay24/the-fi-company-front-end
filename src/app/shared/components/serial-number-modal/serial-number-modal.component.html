<div class="modal-header">
  <h4 class="modal-title">{{ title }}</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="dismiss()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<div class="modal-body">
  <!-- Batch Generation Options -->
  <div class="row mb-3" *ngIf="returnMultiple">
    <div class="col-md-6">
      <label class="form-label">Number of Serial Numbers</label>
      <input type="number" class="form-control" [(ngModel)]="batchCount" min="1" max="100">
    </div>
    <div class="col-md-6 d-flex align-items-end">
      <button type="button" class="btn btn-outline-primary" (click)="generateBatch()">
        Generate Batch
      </button>
    </div>
  </div>

  <!-- Serial Number Generator Component -->
  <app-serial-number-generator 
    [showForm]="showForm"
    [config]="config"
    (serialNumberGenerated)="onSerialNumberGenerated($event)"
    (configChanged)="onConfigChanged($event)">
  </app-serial-number-generator>

  <!-- Batch Results -->
  <div class="row mt-3" *ngIf="returnMultiple && generatedBatch.length > 0">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h6 class="card-title mb-0">Generated Batch ({{ generatedBatch.length }} items)</h6>
        </div>
        <div class="card-body">
          <div class="list-group list-group-flush">
            <div class="list-group-item d-flex justify-content-between align-items-center px-0" 
                 *ngFor="let serial of generatedBatch; let i = index">
              <span class="font-monospace">{{ i + 1 }}. {{ serial }}</span>
              <button class="btn btn-link btn-sm text-muted p-0" (click)="copyToClipboard(serial)">
                <i class="mdi mdi-content-copy"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="dismiss()">
    Cancel
  </button>
  <button type="button" class="btn btn-primary" (click)="close()" 
          [disabled]="!generatedSerialNumber && (!returnMultiple || generatedBatch.length === 0)">
    <i class="mdi mdi-check me-1"></i>
    {{ returnMultiple ? 'Use Batch' : 'Use Serial Number' }}
  </button>
</div>
