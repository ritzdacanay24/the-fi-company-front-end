<div class="container-fluid pb-3" style="max-width: 1200px;">
  <div class="settings-form">
    <!-- Header -->
    <div class="card-header bg-warning bg-gradient text-white p-4 position-relative overflow-hidden">
      <div class="position-absolute" style="top: -20px; right: -20px; opacity: 0.08;">
        <i class="mdi mdi-barcode-scan" style="font-size: 8rem; transform: rotate(15deg);"></i>
      </div>
      <div class="d-flex align-items-center justify-content-between position-relative">
        <div class="d-flex align-items-center">
          <span class="bg-white bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3"
            style="width: 2.5rem; height: 2.5rem;">
            <i class="mdi mdi-barcode-scan fs-4 text-white"></i>
          </span>
          <div>
            <h4 class="mb-1 fw-bold text-white">Serial Number Manager</h4>
            <p class="mb-0 text-white-50">Generate ranges and manage serial numbers for tag generation</p>
          </div>
        </div>
        <div class="badge bg-light text-warning fs-6 px-3 py-2">
          <i class="mdi mdi-shield-account me-1"></i>
          Admin Portal
        </div>
      </div>
    </div>

    <!-- Alert Section -->
    @if (showSuccessAlert) {
      <div class="alert alert-success border-0 shadow-sm mx-4 mt-4" role="alert">
        <div class="d-flex align-items-center">
          <i class="mdi mdi-check-circle me-2"></i>
          <span>{{ successMessage }}</span>
          <button type="button" class="btn-close ms-auto" (click)="hideSuccessAlert()"></button>
        </div>
      </div>
    }

    @if (showErrorAlert) {
      <div class="alert alert-danger border-0 shadow-sm mx-4 mt-4" role="alert">
        <div class="d-flex align-items-center">
          <i class="mdi mdi-alert-circle me-2"></i>
          <span>{{ errorMessage }}</span>
          <button type="button" class="btn-close ms-auto" (click)="hideErrorAlert()"></button>
        </div>
      </div>
    }

    <!-- Management Actions Card -->
    <div class="card border-0 shadow-sm mx-4 mt-4">
      <div class="card-body p-4">
        <h5 class="card-title mb-3">
          <i class="mdi mdi-cog text-primary me-2"></i>
          Management Actions
        </h5>
        
        <div class="row g-3">
          <!-- Upload Serial Numbers -->
          <div class="col-md-6">
            <div class="card border border-primary h-100">
              <div class="card-body text-center p-4">
                <div class="text-primary mb-3">
                  <i class="mdi mdi-upload" style="font-size: 2.5rem;"></i>
                </div>
                <h6 class="card-title text-primary">Upload Serial Numbers</h6>
                <p class="card-text text-muted small mb-3">
                  Import serial numbers via CSV file or manual entry with validation and duplicate detection.
                </p>
                <button type="button" class="btn btn-primary" (click)="navigateToUpload()">
                  <i class="mdi mdi-upload me-1"></i>
                  Upload Serials
                </button>
              </div>
            </div>
          </div>

          <!-- Generate Range -->
          <div class="col-md-6">
            <div class="card border border-success h-100">
              <div class="card-body text-center p-4">
                <div class="text-success mb-3">
                  <i class="mdi mdi-auto-fix" style="font-size: 2.5rem;"></i>
                </div>
                <h6 class="card-title text-success">Generate Range</h6>
                <p class="card-text text-muted small mb-3">
                  Generate sequential serial numbers with customizable prefix and range settings.
                </p>
                <button type="button" class="btn btn-success" (click)="showRangeGenerator = true">
                  <i class="mdi mdi-auto-fix me-1"></i>
                  Generate Range
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Range Generator Modal -->
    @if (showRangeGenerator) {
      <div class="card border-0 shadow-sm mx-4 mt-4">
        <div class="card-header bg-light">
          <div class="d-flex align-items-center justify-content-between">
            <h6 class="mb-0">
              <i class="mdi mdi-auto-fix text-success me-2"></i>
              Range Generator
            </h6>
            <button type="button" class="btn-close" (click)="showRangeGenerator = false"></button>
          </div>
        </div>
        
        <div class="card-body p-4">
          <form [formGroup]="rangeForm" (ngSubmit)="generateRange()">
            <div class="row g-4">
              <!-- Prefix -->
              <div class="col-md-6">
                <label for="prefix" class="form-label fw-semibold">
                  <i class="mdi mdi-format-text text-info me-1"></i>
                  Prefix
                </label>
                <input
                  type="text"
                  id="prefix"
                  class="form-control"
                  formControlName="prefix"
                  placeholder="e.g., SN, IGT, GAME"
                  maxlength="10">
                <div class="form-text">Optional prefix for all generated serials</div>
              </div>

              <!-- Category -->
              <div class="col-md-6">
                <label for="category" class="form-label fw-semibold">
                  <i class="mdi mdi-tag text-warning me-1"></i>
                  Category <span class="text-danger">*</span>
                </label>
                <select
                  id="category"
                  class="form-select"
                  formControlName="category"
                  required>
                  <option value="">Select category...</option>
                  <option value="gaming">Gaming</option>
                  <option value="server">Server</option>
                  <option value="accessory">Accessory</option>
                  <option value="test">Test</option>
                </select>
              </div>

              <!-- Start Number -->
              <div class="col-md-6">
                <label for="startNumber" class="form-label fw-semibold">
                  <i class="mdi mdi-numeric text-primary me-1"></i>
                  Start Number <span class="text-danger">*</span>
                </label>
                <input
                  type="number"
                  id="startNumber"
                  class="form-control"
                  formControlName="startNumber"
                  min="1"
                  placeholder="e.g., 1000"
                  required>
                <div class="form-text">Starting number for the range</div>
              </div>

              <!-- Count -->
              <div class="col-md-6">
                <label for="count" class="form-label fw-semibold">
                  <i class="mdi mdi-counter text-success me-1"></i>
                  Count <span class="text-danger">*</span>
                </label>
                <input
                  type="number"
                  id="count"
                  class="form-control"
                  formControlName="count"
                  min="1"
                  max="10000"
                  placeholder="e.g., 100"
                  required>
                <div class="form-text">Number of serials to generate (max 10,000)</div>
              </div>

              <!-- Padding -->
              <div class="col-md-6">
                <label for="padding" class="form-label fw-semibold">
                  <i class="mdi mdi-format-align-justify text-secondary me-1"></i>
                  Number Padding
                </label>
                <select
                  id="padding"
                  class="form-select"
                  formControlName="padding">
                  <option value="0">No padding</option>
                  <option value="2">2 digits (01, 02, ...)</option>
                  <option value="3">3 digits (001, 002, ...)</option>
                  <option value="4">4 digits (0001, 0002, ...)</option>
                  <option value="5">5 digits (00001, 00002, ...)</option>
                  <option value="6">6 digits (000001, 000002, ...)</option>
                </select>
              </div>

              <!-- Preview -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">
                  <i class="mdi mdi-eye text-info me-1"></i>
                  Preview
                </label>
                <div class="border rounded p-3 bg-light">
                  <div class="text-muted small mb-1">First three serials:</div>
                  <div class="font-monospace small">
                    @if (getPreviewSerials().length > 0) {
                      @for (serial of getPreviewSerials(); track serial) {
                        <div>{{ serial }}</div>
                      }
                    } @else {
                      <div class="text-muted">Enter values to see preview</div>
                    }
                  </div>
                </div>
              </div>
            </div>

            <!-- Actions -->
            <div class="d-flex justify-content-end gap-2 mt-4">
              <button
                type="button"
                class="btn btn-light"
                (click)="showRangeGenerator = false">
                <i class="mdi mdi-close me-1"></i>
                Cancel
              </button>
              <button
                type="submit"
                class="btn btn-success"
                [disabled]="!rangeForm.valid || isGenerating">
                @if (isGenerating) {
                  <i class="mdi mdi-loading mdi-spin me-1"></i>
                  Generating...
                } @else {
                  <i class="mdi mdi-auto-fix me-1"></i>
                  Generate {{ rangeForm.get('count')?.value || 0 }} Serials
                }
              </button>
            </div>
          </form>
        </div>
      </div>
    }

    <!-- Statistics Card -->
    <div class="card border-0 shadow-sm mx-4 mt-4">
      <div class="card-body p-4">
        <h5 class="card-title mb-3">
          <i class="mdi mdi-chart-box text-info me-2"></i>
          Current Statistics
        </h5>
        
        @if (isLoadingStats) {
          <div class="text-center py-4">
            <div class="spinner-border spinner-border-sm text-primary me-2"></div>
            Loading statistics...
          </div>
        } @else if (statistics) {
          <div class="row g-3">
            <div class="col-md-3">
              <div class="card border-success">
                <div class="card-body text-center p-3">
                  <div class="text-success mb-2">
                    <i class="mdi mdi-check-circle" style="font-size: 1.5rem;"></i>
                  </div>
                  <div class="h5 text-success mb-1">{{ statistics.available || 0 }}</div>
                  <div class="small text-muted">Available</div>
                </div>
              </div>
            </div>
            
            <div class="col-md-3">
              <div class="card border-warning">
                <div class="card-body text-center p-3">
                  <div class="text-warning mb-2">
                    <i class="mdi mdi-clock-outline" style="font-size: 1.5rem;"></i>
                  </div>
                  <div class="h5 text-warning mb-1">{{ statistics.reserved || 0 }}</div>
                  <div class="small text-muted">Reserved</div>
                </div>
              </div>
            </div>
            
            <div class="col-md-3">
              <div class="card border-primary">
                <div class="card-body text-center p-3">
                  <div class="text-primary mb-2">
                    <i class="mdi mdi-tag" style="font-size: 1.5rem;"></i>
                  </div>
                  <div class="h5 text-primary mb-1">{{ statistics.used || 0 }}</div>
                  <div class="small text-muted">Used</div>
                </div>
              </div>
            </div>
            
            <div class="col-md-3">
              <div class="card border-secondary">
                <div class="card-body text-center p-3">
                  <div class="text-secondary mb-2">
                    <i class="mdi mdi-sigma" style="font-size: 1.5rem;"></i>
                  </div>
                  <div class="h5 text-secondary mb-1">{{ statistics.total || 0 }}</div>
                  <div class="small text-muted">Total</div>
                </div>
              </div>
            </div>
          </div>
        } @else {
          <div class="alert alert-light border-0 mb-0">
            <i class="mdi mdi-information-outline me-2"></i>
            No statistics available
          </div>
        }
      </div>
    </div>
  </div>
</div>
