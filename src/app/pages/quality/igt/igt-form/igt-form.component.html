<form [formGroup]="form" class="settings-form" autocomplete="off">

  <div class="body">

    <!-- Asset Identification Section -->
    <div class="mb-4 pb-4 border-bottom">
      <div class="mb-3">
        <h3 class="h5 mb-1">Asset Identification</h3>
        <p class="text-muted mb-0">
          Serial numbers and part references for this IGT asset.
        </p>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">
            IGT Serial Number <span class="text-danger">*</span>
          </label>
          <ng-select 
            id="serial_number" 
            formControlName="serial_number"
            [items]="availableSerialNumbers"
            bindLabel="serial_number"
            bindValue="serial_number"
            [searchable]="true"
            [clearable]="true"
            [loading]="isLoadingSerials"
            placeholder="Search and select an available serial number"
            appendTo="body"
            [ngClass]="{ 'is-invalid': submitted && f.serial_number.errors }">
            
            <ng-option *ngFor="let serial of availableSerialNumbers" 
                       [value]="serial.serial_number"
                       [disabled]="!serial.isAvailable">
              <span [ngClass]="{'text-muted': !serial.isAvailable, 'text-success': serial.isAvailable}">
                {{ serial.serial_number }}
                <span *ngIf="serial.category" class="text-muted"> ({{ serial.category }})</span>
                <span *ngIf="!serial.isAvailable" class="badge bg-warning ms-2">
                  Selected by {{ serial.selectedBy }}
                </span>
              </span>
            </ng-option>
            
            <ng-template ng-loadingspinner-tmp>
              <i class="mdi mdi-loading mdi-spin me-2"></i>Loading serial numbers...
            </ng-template>
            
            <ng-template ng-notfound-tmp>
              <div class="text-center p-2">
                <i class="mdi mdi-alert-circle me-1"></i>
                No available serial numbers found
              </div>
            </ng-template>
          </ng-select>
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Search and select from available serial numbers in inventory.
          </div>
          @if (submitted && f.serial_number.errors) {
            <div class="invalid-feedback d-block">
              <i class="mdi mdi-alert-circle me-1"></i> EyeFi serial number selection is required
            </div>
          }
        </div>

        <!-- <div class="col-md-6 mb-3">
          <label class="form-label">
            Eyefi Serial Number <span class="text-danger">*</span>
          </label>
          <input type="text" class="form-control" formControlName="igt_serial_number"
            placeholder="Enter IGT-assigned device serial number"
            [ngClass]="{ 'is-invalid': submitted && f.igt_serial_number.errors }">
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            IGT-assigned device serial number for identification.
          </div>
          @if (submitted && f.igt_serial_number.errors) {
            <div class="invalid-feedback d-block">
              <i class="mdi mdi-alert-circle me-1"></i> IGT serial number is required
            </div>
          }
        </div> -->

        <div class="col-md-6 mb-3">
          <label class="form-label">
            IGT Part Number
          </label>
          <input type="text" class="form-control" formControlName="igt_part_number"
            placeholder="Enter IGT part number"
            [ngClass]="{ 'is-invalid': submitted && f.igt_part_number.errors }">
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Customer IGT part number reference.
          </div>
        </div>

        <!-- <div class="col-md-6 mb-3">
          <label class="form-label">
            Eyefi Part Number
          </label>
          <input type="text" class="form-control" formControlName="eyefi_part_number"
            placeholder="Internal part reference"
            [ngClass]="{ 'is-invalid': submitted && f.eyefi_part_number.errors }">
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Internal inventory reference number.
          </div>
        </div> -->
      </div>
    </div>

    <!-- Manufacturing & Deployment Section -->
    <!-- <div class="mb-4 pb-4 border-bottom">
      <div class="mb-3">
        <h3 class="h5 mb-1">Manufacturing & Deployment</h3>
        <p class="text-muted mb-0">
          Work order details and installation site information.
        </p>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">
            Work Order Number
          </label>
          <input type="text" class="form-control" formControlName="wo_number"
            placeholder="Enter work order number"
            [ngClass]="{ 'is-invalid': submitted && f.wo_number.errors }">
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Manufacturing work order reference.
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">
            Property Site
          </label>
          <input type="text" class="form-control" formControlName="property_site"
            placeholder="Gaming facility or casino"
            [ngClass]="{ 'is-invalid': submitted && f.property_site.errors }">
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Installation location or casino property.
          </div>
        </div>
      </div>
    </div> -->

    <!-- Quality & Status Section -->
    <!-- <div class="mb-4 pb-4 border-bottom">
      <div class="mb-3">
        <h3 class="h5 mb-1">Quality & Status</h3>
        <p class="text-muted mb-0">
          Quality inspector and record status settings.
        </p>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">
            Quality Inspector
          </label>
          <input type="text" class="form-control" formControlName="inspector_name" readonly>
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Assigned quality control inspector for this record.
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">Record Status</label>
          <div class="form-check form-switch mt-2">
            <input class="form-check-input" type="checkbox" id="activeToggle"
              formControlName="active" (change)="setBooleanToNumber('active')">
            <label class="form-check-label" for="activeToggle">
              Active Record
            </label>
          </div>
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Enable this IGT asset record for active use.
          </div>
        </div>
      </div>
    </div> -->

    <!-- Additional Information Section -->
    <div class="mb-4">
      <div class="mb-3">
        <h3 class="h5 mb-1">Additional Information</h3>
        <p class="text-muted mb-0">
          Notes, manual updates, or special instructions for this IGT record.
        </p>
      </div>

      <div class="row">
        <div class="col-12 mb-3">
          <label class="form-label">Notes & Updates</label>
          <textarea class="form-control" formControlName="notes" rows="4"
            placeholder="Enter any additional notes, manual updates, or special instructions for this IGT record..."
            [ngClass]="{ 'is-invalid': submitted && f.notes.errors }"></textarea>
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Document modifications, field updates, or special requirements for this asset.
          </div>
        </div>
      </div>
    </div>

  </div> <!-- end body container -->
</form>
