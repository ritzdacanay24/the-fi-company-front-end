<form [formGroup]="form" class="settings-form" autocomplete="off">

  <!-- Form Lock Status Alert -->
  <div class="alert alert-info d-flex align-items-center mb-4" *ngIf="form.disabled">
    <i class="mdi mdi-lock-outline me-2 fs-5"></i>
    <div>
      <strong>Read-Only Mode:</strong> This form is locked to prevent modifications and maintain data integrity.
    </div>
  </div>

  <div class="body">

    <!-- Contact Information Section -->
    <div class="mb-4 pb-4 border-bottom">
      <div class="mb-3">
        <h3 class="h5 mb-1">Contact Information</h3>
        <p class="text-muted mb-0">
          Provide your contact details for follow-up communication.
        </p>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">
            First Name
          </label>
          <input class="form-control" type="text" formControlName="first_name"
            [ngClass]="{ 'is-invalid': submitted && f.first_name.errors }" placeholder="Enter first name" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Your first name for contact purposes.
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">
            Last Name
          </label>
          <input class="form-control" type="text" formControlName="last_name"
            [ngClass]="{ 'is-invalid': submitted && f.last_name.errors }" placeholder="Enter last name" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Your last name for contact purposes.
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">
            Business Email Address
          </label>
          <input class="form-control" type="text" formControlName="email"
            [ngClass]="{ 'is-invalid': submitted && f.email.errors }" placeholder="Enter business email address" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Primary email address for communication and updates.
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">
            Additional Recipients (Optional)
          </label>
          <ng-select [addTag]="addTag" [hideSelected]="true" [multiple]="true" formControlName="cc_email"
            placeholder="Add stakeholder email addresses for notifications" notFoundText="Type email and press enter">
          </ng-select>
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Additional email addresses to receive notifications.
          </div>
        </div>
      </div>
    </div>

    <!-- Quality Issue Details Section -->
    <div class="mb-4 pb-4 border-bottom">
      <div class="mb-3">
        <h3 class="h5 mb-1">Quality Issue Details</h3>
        <p class="text-muted mb-0">
          Describe when and where the quality issue occurred.
        </p>
      </div>

      <div class="row">
        <div class="col-lg-4 mb-3">
          <label class="form-label">
            Issue Reported Date
          </label>
          <input class="form-control" type="date" formControlName="customerReportedDate"
            [ngClass]="{ 'is-invalid': submitted && f.customerReportedDate.errors }" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Date when the issue was first identified.
          </div>
        </div>

        <div class="col-lg-4 mb-3">
          <label class="form-label">
            Issue Type
          </label>
          <ng-select [items]="formData?.failureType" [searchable]="true" formControlName="failureType" bindLabel="name"
            bindValue="name" placeholder="Select issue type"
            [ngClass]="{ 'is-invalid': submitted && f.failureType.errors }" [addTag]="false" [markFirst]="false"
            [appendTo]="'body'" (click)="getQirSettings()">
          </ng-select>
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Category that best describes the issue type.
          </div>
        </div>

        <div class="col-lg-4 mb-3">
          <label class="form-label">
            Warranty Status
          </label>
          <select class="form-select" formControlName="warranty_replacement"
            [ngClass]="{ 'is-invalid': submitted && f.warranty_replacement.errors }">
            <option selected disabled value="null">Select warranty status</option>
            <option *ngFor="let row of ['Yes', 'No', 'N/A']" [value]="row">{{row}}</option>
          </select>
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Whether the product is covered under warranty.
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4 mb-3">
          <label class="form-label">
            Facility Name
          </label>
          <input type="text" class="form-control" name="casinoName" formControlName="casinoName"
            [ngClass]="{ 'is-invalid': submitted && f.casinoName.errors }" placeholder="Enter facility name" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Name of the facility where the issue occurred.
          </div>
        </div>

        <div class="col-md-8 mb-3">
          <label class="form-label">
            Location of Issue
          </label>
          <app-address-search (notifyParent)="notifyParent($event)" [value]="f.location.value"
            [disabled]="this.form.disabled" form_label="Location of Issue" [showLabel]="false">
          </app-address-search>
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Enter facility name to search for specific location details.
          </div>
        </div>
      </div>
    </div>

    <!-- Product Information Section -->
    <div class="mb-4 pb-4 border-bottom">
      <div class="mb-3">
        <h3 class="h5 mb-1">Product Information</h3>
        <p class="text-muted mb-0">
          Identify the affected products and reference numbers.
        </p>
      </div>

      <div class="row">
        <div class="col-lg-4 mb-3">
          <label class="form-label">
            Company Name
          </label>
          <input class="form-control" type="text" formControlName="customerName"
            [ngClass]="{ 'is-invalid': submitted && f.customerName.errors }" placeholder="Enter company name" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Name of the company experiencing the issue.
          </div>
        </div>

        <div class="col-lg-4 mb-3">
          <label class="form-label">
            Customer Part Number
          </label>
          <input type="text" class="form-control" name="CustomerPartNumber" formControlName="CustomerPartNumber"
            [ngClass]="{ 'is-invalid': submitted && f.CustomerPartNumber.errors }"
            placeholder="Enter customer part number" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Customer's internal part number reference.
          </div>
        </div>

        <div class="col-lg-4 mb-3">
          <label class="form-label">
            Product Serial Number
          </label>
          <input type="text" class="form-control" name="customerSerialNumber" formControlName="customerSerialNumber"
            [ngClass]="{ 'is-invalid': submitted && f.customerSerialNumber.errors }"
            placeholder="Enter product serial number" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Serial number of the affected product.
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-4 mb-3">
          <label class="form-label">
            EYE-Fi Part Number
          </label>
          <input type="text" class="form-control" name="eyefiPartNumber" formControlName="eyefiPartNumber"
            [ngClass]="{ 'is-invalid': submitted && f.eyefiPartNumber.errors }" placeholder="Enter EYE-Fi part number" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            EYE-Fi internal part number for the product.
          </div>
        </div>

        <div class="col-lg-4 mb-3">
          <label class="form-label">
            Purchase/Sales Order Number
          </label>
          <input type="text" class="form-control" name="purchaseOrder" formControlName="purchaseOrder"
            [ngClass]="{ 'is-invalid': submitted && f.purchaseOrder.errors }" placeholder="Enter PO/SO number" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Purchase or sales order reference number.
          </div>
        </div>

        <div class="col-lg-4 mb-3">
          <label class="form-label">
            Quantity of Components Affected
          </label>
          <input type="text" class="form-control" name="qtyAffected" formControlName="qtyAffected"
            [ngClass]="{ 'is-invalid': submitted && f.qtyAffected.errors }"
            placeholder="Enter component quantity" />
          <div class="form-text">
            <i class="mdi mdi-information-outline me-1"></i>
            Number of affected components or units.
          </div>
        </div>
      </div>
    </div>

    <!-- Issue Description Section -->
    <div class="mb-4">
      <div class="mb-3">
        <h3 class="h5 mb-1">Issue Description</h3>
        <p class="text-muted mb-0">
          Provide a detailed description of the problem and troubleshooting performed.
        </p>
      </div>

      <div class="mb-3">
        <label class="form-label">
          Issue Description and Troubleshooting Details
        </label>
        <quill-editor [ngClass]="{ 'is-invalid border border-danger rounded': submitted && f.issueComment.errors }"
          formControlName="issueComment" placeholder="Provide a detailed description of the issue, including any troubleshooting steps performed, error messages, and conditions when the problem occurs..." [modules]="quillConfig"
          [styles]="{height: '300px'}" style="width:100%">
        </quill-editor>
        <div class="form-text">
          <i class="mdi mdi-information-outline me-1"></i>
          Include troubleshooting steps, error messages, conditions when problem occurs, and any relevant technical details.
        </div>
      </div>
    </div>

  </div> <!-- end body container -->
</form>