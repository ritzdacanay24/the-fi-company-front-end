<div class="modal-header">
  <h4 class="modal-title">User Info</h4>
  <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="dismiss()" aria-label="Close"></button>
</div>
<div class="modal-body mh-250">

  <app-loading [isLoading]="isLoading" [showBorder]="false"></app-loading>

  <h4 *ngIf="!isLoading && !data && id">Sorry, no data found.</h4>

  <div class="mb-3 mt-3 text-center">
    <img class="img-thumbnail" [src]="data?.image || imageTemp" style="width:100px" *ngIf="form?.value?.image">
    <p class="mb-2 pointer text-danger" (click)="removeImage()" *ngIf="form?.value?.image">Remove Image</p>
    <p class="mb-2" *ngIf="!form?.value?.image">Select profile picture</p>
    <div class="input-group mb-2">
      <input (change)="this.onFilechange($event)" class="form-control" type="file" id="file" name="file" [disabled]="form?.disabled" accept="image/*">
      <button type="button" class="btn btn-outline-primary" 
              [disabled]="!myFiles || isLoading" 
              (click)="onUploadAttachments()">
        <i class="mdi mdi-upload me-1" *ngIf="!isLoading"></i>
        <i class="mdi mdi-loading mdi-spin me-1" *ngIf="isLoading"></i>
        {{ isLoading ? 'Uploading...' : 'Upload Image' }}
      </button>
    </div>
  </div>

  <app-user-edit-form (setFormEmitter)="form = $event" (imageUploadSuccess)="onImageUploadSuccess($event)" [submitted]="submitted"></app-user-edit-form>


</div>
<div class="modal-footer">
  <button (click)="dismiss()" type="button" class="btn btn-light">Close</button>
  <button (click)="onSubmit()" type="button" class="btn btn-primary"
    [disabled]="isLoading || this.form.disabled">{{this.id ? 'Update' : 'Create'}}</button>
</div>