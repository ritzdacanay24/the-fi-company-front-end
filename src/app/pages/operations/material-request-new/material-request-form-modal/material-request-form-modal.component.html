<div class="modal-header bg-primary bg-gradient text-white position-relative overflow-hidden p-4"
     style="border-radius: 16px 16px 0 0;">
  <!-- Background Pattern -->
  <div class="position-absolute" style="top: -20px; right: -20px; opacity: 0.1;">
    <i class="mdi mdi-file-document-plus" style="font-size: 8rem; transform: rotate(15deg);"></i>
  </div>
  
  <div class="d-flex align-items-center justify-content-between position-relative w-100">
    <div class="d-flex align-items-center">
      <span class="bg-white bg-opacity-20 rounded-circle d-flex align-items-center justify-content-center me-3"
            style="width: 3rem; height: 3rem;">
        <i class="mdi mdi-file-document-plus fs-4 text-white"></i>
      </span>
      <div>
        <h4 class="mb-1 fw-bold text-white">
          {{title}}
        </h4>
        <div class="d-flex align-items-center gap-3 text-white-50">
          <span>
            <i class="mdi mdi-form-select me-1"></i>Material Request Form
          </span>
          <span *ngIf="enableEdit" class="badge bg-white bg-opacity-25">
            <i class="mdi mdi-pencil me-1"></i>Edit Mode
          </span>
          <span *ngIf="!enableEdit" class="badge bg-success bg-opacity-75">
            <i class="mdi mdi-eye me-1"></i>View Only
          </span>
        </div>
      </div>
    </div>
    
    <button type="button" 
            class="btn-close btn-close-white" 
            aria-label="Close" 
            (click)="onCancel()">
    </button>
  </div>
</div>

<div class="modal-body">
  <div class="alert d-flex align-items-center mb-4" role="alert"
       [ngClass]="enableEdit ? 'alert-info' : 'alert-warning'">
    <i class="mdi me-2" [ngClass]="enableEdit ? 'mdi-information' : 'mdi-eye'"></i>
    <div>
      <strong>Material Request Form:</strong> 
      {{enableEdit ? 'Fill out the form below to create or edit a material request.' : 'This form is in view-only mode. All fields are disabled for viewing purposes only.'}}
    </div>
  </div>
  
  <app-material-request-form 
    [enableEdit]="enableEdit"
    [submitted]="submitted"
    [id]="id"
    [onDeleteItem]="onDeleteItem"
    [disabled]="!enableEdit"
    (setFormEmitter)="onFormSet($event)">
  </app-material-request-form>
</div>

<div class="modal-footer p-3 bg-light" style="border-radius: 0 0 16px 16px">
  <div class="d-flex justify-content-between align-items-center w-100">
    <div class="text-muted small">
      <i class="mdi mdi-shield-check-line me-1"></i>
      Form validation will check for required fields
    </div>
    <div class="hstack gap-2">
      <button type="button" 
              class="btn btn-light" 
              (click)="onCancel()" 
              [disabled]="isLoading">
        <i class="mdi mdi-close-line me-1"></i>
        Cancel
      </button>
      <button type="button" 
              class="btn btn-primary" 
              (click)="onSave()" 
              [disabled]="!modalForm || modalForm.invalid || isLoading"
              *ngIf="enableEdit">
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-1" role="status"></span>
        <i *ngIf="!isLoading" class="mdi mdi-content-save me-1"></i>
        {{isLoading ? 'Saving...' : (id ? 'Update Request' : 'Save Request')}}
      </button>
    </div>
  </div>
</div>
